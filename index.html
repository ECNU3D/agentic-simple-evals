<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Simple Evals - Interactive Framework Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 0;
        }
        
        .ascii-logo {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .workflow-demo {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        
        .step {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .step:hover {
            transform: translateY(-5px);
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0 auto 15px;
        }
        
        .interactive-demo {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
        }
        
        .demo-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-group {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .control-group h4 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        select, input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .checkbox-container input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
            margin-bottom: 0;
            transform: scale(1.2);
        }
        
        .checkbox-container label {
            margin: 0;
            cursor: pointer;
            user-select: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .demo-output {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            margin: 20px 0;
        }
        
        .model-support {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .model-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .model-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .benchmark-table {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }
        
        .status-ready { background: #28a745; }
        .status-processing { background: #ffc107; }
        .status-error { background: #dc3545; }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .workflow-steps {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .demo-controls {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .workflow-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="ascii-logo">
  ___                   _   _        _____ _                 _        _____           _     
 / _ \                 | | (_)      /  ___(_)               | |      |  ___|         | |    
/ /_\ \ __ _  ___ _ __ | |_ _  ___  \ `--. _ _ __ ___  _ __ | | ___  | |____   ____ _| |___ 
|  _  |/ _` |/ _ \ '_ \| __| |/ __|  `--. \ | '_ ` _ \| '_ \| |/ _ \ |  __\ \ / / _` | / __|
| | | | (_| |  __/ | | | |_| | (__  /\__/ / | | | | | | |_) | |  __/ | |___\ V / (_| | \__ \
\_| |_/\__, |\___|_| |_|\__|_|\___| \____/|_|_| |_| |_| .__/|_|\___| \____/ \_/ \__,_|_|___/
        __/ |                                         | |                                   
       |___/                                          |_|
            </div>
            <h1>Agentic Simple Evals</h1>
            <p class="subtitle">AI-Powered Evaluation Generation Framework</p>
        </header>

        <div class="main-content">
            <div class="tabs">
                <div class="tab active" data-tab="overview">üè† Overview</div>
                <div class="tab" data-tab="features">‚ú® Features</div>
                <div class="tab" data-tab="demo">üöÄ Interactive Demo</div>
                <div class="tab" data-tab="workflow">‚öôÔ∏è Workflow</div>
                <div class="tab" data-tab="benchmarks">üìä Benchmarks</div>
            </div>

            <div class="tab-content active" id="overview">
                <div class="section">
                    <h2>üéØ What is Agentic Simple Evals?</h2>
                    <p>Agentic Simple Evals is an advanced fork of OpenAI's simple-evals repository that introduces a powerful <strong>AI-powered evaluation generation system</strong>. Instead of manually writing evaluation code, our framework uses intelligent agents to automatically analyze datasets, understand their structure, and generate complete evaluation suites.</p>
                    
                    <div class="highlight">
                        <strong>üî• Key Innovation:</strong> Transform any HuggingFace dataset into a comprehensive evaluation suite in minutes, not hours!
                    </div>
                </div>

                <div class="section">
                    <h2>üé® Core Capabilities</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3>üîç Automatic Dataset Analysis</h3>
                            <p>Intelligently analyzes dataset structure, column types, and content patterns to understand the task at hand.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üéØ Smart Template Selection</h3>
                            <p>Automatically selects the most appropriate evaluation template based on task type (MMLU, MATH, DROP, etc.).</p>
                        </div>
                        <div class="feature-card">
                            <h3>‚úçÔ∏è Custom Prompt Engineering</h3>
                            <p>Generates task-specific prompts with full support for custom prompt templates and runtime customization.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üìä Flexible Scoring Methods</h3>
                            <p>Supports multiple scoring strategies including exact match, fuzzy matching, mathematical equivalence, and LLM-based grading.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üíª Code Generation & Validation</h3>
                            <p>Generates complete, runnable evaluation classes with automatic syntax validation and error handling.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üîß Enhanced Infrastructure</h3>
                            <p>Robust checkpointing, batch processing, and support for multiple model providers (OpenAI, Anthropic, Google).</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>üöÄ Supported Model Providers</h2>
                    <div class="model-support">
                        <div class="model-card">
                            <h4>OpenAI GPT</h4>
                            <p>GPT-4, GPT-4-Turbo, GPT-3.5-Turbo with full API support</p>
                        </div>
                        <div class="model-card">
                            <h4>Anthropic Claude</h4>
                            <p>Claude 3.5 Sonnet, Claude 3 Opus via direct API and Vertex AI</p>
                        </div>
                        <div class="model-card">
                            <h4>Google Gemini</h4>
                            <p>Gemini Pro, Gemini Flash with grounding capabilities</p>
                        </div>
                        <div class="model-card">
                            <h4>Vertex AI</h4>
                            <p>Unified access to multiple models through Google Cloud</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="features">
                <div class="section">
                    <h2>üéØ Supported Task Types</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3>üìö Multiple Choice (MMLU-style)</h3>
                            <p>Perfect for knowledge-based evaluations with choice extraction and scoring.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üßÆ Mathematical Problems (MATH-style)</h3>
                            <p>Mathematical problem solving with numerical scoring and equivalence checking.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üìñ Reading Comprehension (DROP-style)</h3>
                            <p>Context-based question answering with passage understanding.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üíª Code Generation (HumanEval-style)</h3>
                            <p>Programming tasks with code execution and validation.</p>
                        </div>
                        <div class="feature-card">
                            <h3>‚ùì Factual Q&A (SimpleQA-style)</h3>
                            <p>Factual questions with precise answer matching.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üìù Text Generation</h3>
                            <p>Open-ended text generation with flexible scoring methods.</p>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>‚öôÔ∏è Advanced Features</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3>üîÑ Batch Processing</h3>
                            <p>Configurable batch sizes for memory management and efficient processing.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üíæ Checkpointing System</h3>
                            <p>Resume interrupted evaluations with robust checkpoint loading and saving.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üõ°Ô∏è Error Handling</h3>
                            <p>Comprehensive error recovery with graceful fallbacks and retry mechanisms.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üîß Windows Compatibility</h3>
                            <p>Fixed Windows-specific issues with threading-based timeout solutions.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üìä Progress Tracking</h3>
                            <p>Real-time progress reporting with detailed logging throughout evaluation.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üé® Custom Templates</h3>
                            <p>Full support for custom prompt templates with variable substitution.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="demo">
                <div class="section">
                    <h2>üéÆ Interactive Demo</h2>
                    <p>Experience the power of automatic evaluation generation with our interactive demo. Configure your dataset and see the magic happen!</p>
                    
                    <div class="interactive-demo">
                        <div class="demo-controls">
                            <div class="control-group">
                                <h4>üìö Dataset Configuration</h4>
                                <label>Dataset Name:</label>
                                <select id="datasetSelect">
                                    <option value="rag-datasets/rag-mini-wikipedia">RAG Mini Wikipedia</option>
                                    <option value="cais/mmlu">MMLU</option>
                                    <option value="openai_humaneval">HumanEval</option>
                                    <option value="math_dataset">Math Dataset</option>
                                    <option value="squad">SQuAD</option>
                                    <option value="custom">Custom Dataset</option>
                                </select>
                                <input type="text" id="customDataset" placeholder="Enter custom dataset name" style="display:none;">
                                
                                <label>Subset/Config:</label>
                                <input type="text" id="subsetInput" placeholder="e.g., question-answer">
                                
                                <label>Split:</label>
                                <select id="splitSelect">
                                    <option value="test">test</option>
                                    <option value="validation">validation</option>
                                    <option value="train">train</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <h4>üéØ Task Configuration</h4>
                                <label>Task Type:</label>
                                <select id="taskType">
                                    <option value="auto">Auto-detect</option>
                                    <option value="multiple_choice">Multiple Choice</option>
                                    <option value="math">Mathematical</option>
                                    <option value="reading_comprehension">Reading Comprehension</option>
                                    <option value="code_generation">Code Generation</option>
                                    <option value="factual_qa">Factual Q&A</option>
                                    <option value="text_generation">Text Generation</option>
                                </select>
                                
                                <label>Scoring Method:</label>
                                <select id="scoringMethod">
                                    <option value="auto">Auto-select</option>
                                    <option value="exact_match">Exact Match</option>
                                    <option value="fuzzy_match">Fuzzy Match</option>
                                    <option value="math_equivalence">Math Equivalence</option>
                                    <option value="multiple_choice">Multiple Choice</option>
                                    <option value="semantic_similarity">Semantic Similarity</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <h4>‚úçÔ∏è Prompt Template</h4>
                                <textarea id="promptTemplate" rows="4" placeholder="Leave blank for auto-generated prompt">Question: {question}
Answer:</textarea>
                                
                                <div class="checkbox-container">
                                    <input type="checkbox" id="interactiveMode">
                                    <label for="interactiveMode">Interactive Mode</label>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin: 30px 0;">
                            <button class="btn" onclick="startDemo()">üöÄ Generate Evaluation</button>
                            <button class="btn" onclick="resetDemo()" style="margin-left: 10px; background: #6c757d;">üîÑ Reset</button>
                        </div>

                        <div id="progressSection" style="display: none;">
                            <h4>Progress:</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <p id="statusText">Ready to start...</p>
                        </div>

                        <div class="demo-output" id="demoOutput">
                            <span style="color: #4ade80;">‚ûú</span> <span style="color: #38bdf8;">agentic-simple-evals</span> <span style="color: #f59e0b;">$</span> Ready to generate evaluation...
                            <br><br>
                            <span style="color: #9ca3af;">Configure your dataset above and click "Generate Evaluation" to see the magic! ‚ú®</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="workflow">
                <div class="section">
                    <h2>‚öôÔ∏è End-to-End Workflow</h2>
                    <p>Our agentic system follows a sophisticated 8-step process to transform any dataset into a comprehensive evaluation suite:</p>
                    
                    <div class="workflow-demo">
                        <div class="workflow-steps">
                            <div class="step">
                                <div class="step-number">1</div>
                                <h4>üîç Dataset Analysis</h4>
                                <p>Analyze structure, columns, and content patterns</p>
                            </div>
                            <div class="step">
                                <div class="step-number">2</div>
                                <h4>üéØ Task Detection</h4>
                                <p>Determine appropriate evaluation approach</p>
                            </div>
                            <div class="step">
                                <div class="step-number">3</div>
                                <h4>üóÇÔ∏è Column Mapping</h4>
                                <p>Map dataset columns to template variables</p>
                            </div>
                            <div class="step">
                                <div class="step-number">4</div>
                                <h4>‚úçÔ∏è Prompt Engineering</h4>
                                <p>Generate task-specific prompts</p>
                            </div>
                            <div class="step">
                                <div class="step-number">5</div>
                                <h4>‚öñÔ∏è Scoring Strategy</h4>
                                <p>Select appropriate scoring methods</p>
                            </div>
                            <div class="step">
                                <div class="step-number">6</div>
                                <h4>üíª Code Generation</h4>
                                <p>Create complete evaluation class</p>
                            </div>
                            <div class="step">
                                <div class="step-number">7</div>
                                <h4>‚úÖ Validation</h4>
                                <p>Validate and fix generated code</p>
                            </div>
                            <div class="step">
                                <div class="step-number">8</div>
                                <h4>üìã Registration</h4>
                                <p>Save and register for immediate use</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>üíª Example Generated Code</h2>
                    <p>Here's what our system generates for a typical dataset:</p>
                    
                    <div class="code-block">
<span style="color: #f59e0b;">import</span> <span style="color: #10b981;">random</span><br>
<span style="color: #f59e0b;">from</span> <span style="color: #10b981;">datasets</span> <span style="color: #f59e0b;">import</span> <span style="color: #10b981;">load_dataset</span><br>
<span style="color: #f59e0b;">from</span> <span style="color: #10b981;">typing</span> <span style="color: #f59e0b;">import</span> <span style="color: #10b981;">Optional</span><br>
<br>
<span style="color: #f59e0b;">import</span> <span style="color: #10b981;">common</span><br>
<span style="color: #f59e0b;">from</span> <span style="color: #10b981;">eval_types</span> <span style="color: #f59e0b;">import</span> <span style="color: #10b981;">Eval, EvalResult, SamplerBase</span><br>
<span style="color: #f59e0b;">from</span> <span style="color: #10b981;">eval_utils</span> <span style="color: #f59e0b;">import</span> <span style="color: #10b981;">extract_answer_after_keyword, ScoringStrategy, EvaluationMixin</span><br>
<br>
<br>
<span style="color: #f59e0b;">class</span> <span style="color: #fbbf24;">CustomDatasetEval</span>(<span style="color: #10b981;">Eval</span>, <span style="color: #10b981;">EvaluationMixin</span>):<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">def</span> <span style="color: #fbbf24;">__init__</span>(<span style="color: #10b981;">self</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">dataset_name</span>: <span style="color: #10b981;">str</span> = <span style="color: #34d399;">"custom/dataset"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">num_examples</span>: <span style="color: #10b981;">Optional</span>[<span style="color: #10b981;">int</span>] = <span style="color: #f59e0b;">None</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">batch_size</span>: <span style="color: #10b981;">int</span> = <span style="color: #fbbf24;">20</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">checkpoint_file</span>: <span style="color: #10b981;">Optional</span>[<span style="color: #10b981;">str</span>] = <span style="color: #f59e0b;">None</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">prompt_template</span>: <span style="color: #10b981;">Optional</span>[<span style="color: #10b981;">str</span>] = <span style="color: #f59e0b;">None</span>):<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Initialize configuration</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">dataset_name</span> = <span style="color: #10b981;">dataset_name</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">batch_size</span> = <span style="color: #10b981;">batch_size</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">checkpoint_file</span> = <span style="color: #10b981;">checkpoint_file</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">processed_results</span> = []<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Set prompt template</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">prompt_template</span> = <span style="color: #10b981;">prompt_template</span> <span style="color: #f59e0b;">or</span> <span style="color: #34d399;">"Question: {question}\nAnswer:"</span><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Load dataset</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">dataset</span> = <span style="color: #10b981;">load_dataset</span>(<span style="color: #10b981;">dataset_name</span>, <span style="color: #10b981;">split</span>=<span style="color: #34d399;">"test"</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">if</span> <span style="color: #10b981;">num_examples</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">examples</span> = <span style="color: #10b981;">random</span>.<span style="color: #10b981;">Random</span>(<span style="color: #fbbf24;">0</span>).<span style="color: #10b981;">sample</span>(<span style="color: #10b981;">list</span>(<span style="color: #10b981;">dataset</span>), <span style="color: #10b981;">num_examples</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">else</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">examples</span> = <span style="color: #10b981;">list</span>(<span style="color: #10b981;">dataset</span>)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Load checkpoint if exists</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">if</span> <span style="color: #10b981;">self</span>.<span style="color: #10b981;">checkpoint_file</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">processed_results</span> = <span style="color: #10b981;">common</span>.<span style="color: #10b981;">load_checkpoint</span>(<span style="color: #10b981;">self</span>.<span style="color: #10b981;">checkpoint_file</span>)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">def</span> <span style="color: #fbbf24;">__call__</span>(<span style="color: #10b981;">self</span>, <span style="color: #10b981;">sampler</span>: <span style="color: #10b981;">SamplerBase</span>) -> <span style="color: #10b981;">EvalResult</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">def</span> <span style="color: #fbbf24;">process_example</span>(<span style="color: #10b981;">row</span>: <span style="color: #10b981;">dict</span>) -> <span style="color: #10b981;">SingleEvalResult</span>:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Extract question from dataset</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">question</span> = <span style="color: #10b981;">row</span>.<span style="color: #10b981;">get</span>(<span style="color: #34d399;">"question"</span>, <span style="color: #10b981;">str</span>(<span style="color: #10b981;">row</span>))<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Format prompt using template</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">prompt_content</span> = <span style="color: #10b981;">self</span>.<span style="color: #10b981;">prompt_template</span>.<span style="color: #10b981;">format</span>(<span style="color: #10b981;">question</span>=<span style="color: #10b981;">question</span>)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Generate response</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">prompt_messages</span> = <span style="color: #10b981;">self</span>.<span style="color: #10b981;">create_prompt_messages</span>(<span style="color: #10b981;">prompt_content</span>, <span style="color: #10b981;">sampler</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">response_text</span> = <span style="color: #10b981;">sampler</span>(<span style="color: #10b981;">prompt_messages</span>)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Extract and score answer</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">extracted_answer</span> = <span style="color: #10b981;">extract_answer_after_keyword</span>(<span style="color: #10b981;">response_text</span>, <span style="color: #34d399;">"Answer"</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">scorer</span> = <span style="color: #10b981;">ScoringStrategy</span>.<span style="color: #10b981;">get_scorer</span>(<span style="color: #34d399;">"exact_match"</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">target_answer</span> = <span style="color: #10b981;">str</span>(<span style="color: #10b981;">row</span>.<span style="color: #10b981;">get</span>(<span style="color: #34d399;">"answer"</span>, <span style="color: #34d399;">""</span>))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">score</span> = <span style="color: #10b981;">scorer</span>(<span style="color: #10b981;">extracted_answer</span> <span style="color: #f59e0b;">or</span> <span style="color: #34d399;">""</span>, <span style="color: #10b981;">target_answer</span>)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">return</span> <span style="color: #10b981;">self</span>.<span style="color: #10b981;">create_single_eval_result</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">prompt_messages</span>, <span style="color: #10b981;">response_text</span>, <span style="color: #10b981;">score</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">target_answer</span>, <span style="color: #10b981;">extracted_answer</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #9ca3af;"># Process examples with batch processing</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">processed_results</span> = <span style="color: #10b981;">self</span>.<span style="color: #10b981;">batch_process_examples</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">examples</span>, <span style="color: #10b981;">process_example</span>, <span style="color: #10b981;">self</span>.<span style="color: #10b981;">batch_size</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #10b981;">self</span>.<span style="color: #10b981;">checkpoint_file</span>, <span style="color: #10b981;">self</span>.<span style="color: #10b981;">processed_results</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #f59e0b;">return</span> <span style="color: #10b981;">common</span>.<span style="color: #10b981;">aggregate_results</span>(<span style="color: #10b981;">self</span>.<span style="color: #10b981;">processed_results</span>)<br>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="benchmarks">
                <div class="section">
                    <h2>üìä Benchmark Results</h2>
                    <p>Our framework supports all major evaluation benchmarks with state-of-the-art model performance:</p>
                    
                    <div class="benchmark-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Model</th>
                                    <th>MMLU</th>
                                    <th>GPQA</th>
                                    <th>MATH</th>
                                    <th>HumanEval</th>
                                    <th>MGSM</th>
                                    <th>DROP</th>
                                    <th>SimpleQA</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>o3-high</strong></td>
                                    <td>93.3</td>
                                    <td>83.4</td>
                                    <td>98.1</td>
                                    <td>88.4</td>
                                    <td>92.0</td>
                                    <td>89.8</td>
                                    <td>48.6</td>
                                </tr>
                                <tr>
                                    <td><strong>o3</strong></td>
                                    <td>92.9</td>
                                    <td>82.8</td>
                                    <td>97.8</td>
                                    <td>87.4</td>
                                    <td>92.3</td>
                                    <td>80.6</td>
                                    <td>49.4</td>
                                </tr>
                                <tr>
                                    <td><strong>o4-mini-high</strong></td>
                                    <td>90.3</td>
                                    <td>81.3</td>
                                    <td>98.2</td>
                                    <td>99.3</td>
                                    <td>93.5</td>
                                    <td>78.1</td>
                                    <td>19.3</td>
                                </tr>
                                <tr>
                                    <td><strong>GPT-4.1</strong></td>
                                    <td>90.2</td>
                                    <td>66.3</td>
                                    <td>82.1</td>
                                    <td>94.5</td>
                                    <td>86.9</td>
                                    <td>79.4</td>
                                    <td>41.6</td>
                                </tr>
                                <tr>
                                    <td><strong>Claude 3.5 Sonnet</strong></td>
                                    <td>88.3</td>
                                    <td>59.4</td>
                                    <td>71.1</td>
                                    <td>92.0</td>
                                    <td>91.6</td>
                                    <td>87.1</td>
                                    <td>28.9</td>
                                </tr>
                                <tr>
                                    <td><strong>Llama 3.1 405B</strong></td>
                                    <td>88.6</td>
                                    <td>50.7</td>
                                    <td>73.8</td>
                                    <td>89.0</td>
                                    <td>91.6</td>
                                    <td>84.8</td>
                                    <td>‚Äî</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="section">
                    <h2>üéØ Framework Advantages</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <h3>‚ö° Speed</h3>
                            <p>Generate evaluations in minutes instead of hours of manual coding.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üéØ Accuracy</h3>
                            <p>AI agents ensure proper task detection and scoring method selection.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üîß Flexibility</h3>
                            <p>Support for custom prompts, scoring methods, and dataset configurations.</p>
                        </div>
                        <div class="feature-card">
                            <h3>üìà Scalability</h3>
                            <p>Batch processing and checkpointing for large-scale evaluations.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button class="floating-btn" onclick="scrollToTop()" title="Back to top">‚Üë</button>

    <script>
        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.getAttribute('data-tab');
                
                // Remove active class from all tabs and content
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                this.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
            });
        });

        // Dataset selection functionality
        document.getElementById('datasetSelect').addEventListener('change', function() {
            const customInput = document.getElementById('customDataset');
            if (this.value === 'custom') {
                customInput.style.display = 'block';
                customInput.focus();
            } else {
                customInput.style.display = 'none';
            }
            
            // Update suggested configurations based on dataset
            updateSuggestedConfig();
        });

        function updateSuggestedConfig() {
            const dataset = document.getElementById('datasetSelect').value;
            const subsetInput = document.getElementById('subsetInput');
            const taskType = document.getElementById('taskType');
            
            switch(dataset) {
                case 'rag-datasets/rag-mini-wikipedia':
                    subsetInput.value = 'question-answer';
                    taskType.value = 'factual_qa';
                    break;
                case 'cais/mmlu':
                    subsetInput.value = 'abstract_algebra';
                    taskType.value = 'multiple_choice';
                    break;
                case 'openai_humaneval':
                    subsetInput.value = '';
                    taskType.value = 'code_generation';
                    break;
                case 'math_dataset':
                    subsetInput.value = 'algebra__linear_1d';
                    taskType.value = 'math';
                    break;
                default:
                    subsetInput.value = '';
                    taskType.value = 'auto';
            }
        }

        // Demo functionality
        function startDemo() {
            const progressSection = document.getElementById('progressSection');
            const output = document.getElementById('demoOutput');
            const progressFill = document.getElementById('progressFill');
            const statusText = document.getElementById('statusText');
            
            // Get configuration
            const dataset = document.getElementById('datasetSelect').value === 'custom' 
                ? document.getElementById('customDataset').value 
                : document.getElementById('datasetSelect').value;
            const subset = document.getElementById('subsetInput').value;
            const split = document.getElementById('splitSelect').value;
            const taskType = document.getElementById('taskType').value;
            const scoringMethod = document.getElementById('scoringMethod').value;
            const promptTemplate = document.getElementById('promptTemplate').value;
            const interactive = document.getElementById('interactiveMode').checked;
            
            // Show progress
            progressSection.style.display = 'block';
            output.innerHTML = '';
            
            // Simulate the agentic process
            const steps = [
                { progress: 10, message: 'üîç Analyzing dataset structure...', color: '#4ade80' },
                { progress: 20, message: 'üìä Loading dataset samples...', color: '#3b82f6' },
                { progress: 30, message: 'üéØ Detecting task type...', color: '#8b5cf6' },
                { progress: 45, message: 'üóÇÔ∏è Mapping columns to template variables...', color: '#f59e0b' },
                { progress: 60, message: '‚úçÔ∏è Generating prompt template...', color: '#10b981' },
                { progress: 75, message: '‚öñÔ∏è Selecting scoring strategy...', color: '#06b6d4' },
                { progress: 85, message: 'üíª Generating evaluation code...', color: '#ec4899' },
                { progress: 95, message: '‚úÖ Validating generated code...', color: '#84cc16' },
                { progress: 100, message: 'üéâ Evaluation ready!', color: '#22c55e' }
            ];
            
            let currentStep = 0;
            const stepInterval = setInterval(() => {
                if (currentStep < steps.length) {
                    const step = steps[currentStep];
                    progressFill.style.width = step.progress + '%';
                    statusText.textContent = step.message;
                    statusText.style.color = step.color;
                    
                    // Add to output
                    output.innerHTML += `<div style="color: ${step.color};">[${new Date().toLocaleTimeString()}] ${step.message}</div>`;
                    output.scrollTop = output.scrollHeight;
                    
                    currentStep++;
                } else {
                    clearInterval(stepInterval);
                    showFinalResult(dataset, subset, split, taskType, scoringMethod);
                }
            }, 800);
        }

        function showFinalResult(dataset, subset, split, taskType, scoringMethod) {
            const output = document.getElementById('demoOutput');
            const className = dataset.split('/').pop().replace(/[^a-zA-Z0-9]/g, '') + 'Eval';
            const evalName = className.replace('Eval', '').toLowerCase();
            
            output.innerHTML += `
                <div style="color: #22c55e; margin-top: 20px;">
                ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                </div>
                <div style="color: #fbbf24; font-weight: bold;">
                üéâ SUCCESS! Generated evaluation: ${className}
                </div>
                <div style="color: #e2e8f0; margin-top: 10px;">
                üìä Dataset Analysis:
                   ‚Ä¢ Name: ${dataset}
                   ‚Ä¢ Subset: ${subset || 'N/A'}
                   ‚Ä¢ Split: ${split}
                   ‚Ä¢ Task Type: ${taskType}
                   ‚Ä¢ Scoring Method: ${scoringMethod}
                </div>
                <div style="color: #10b981; margin-top: 10px;">
                üìã Generated Files:
                   ‚Ä¢ Class: ${className}
                   ‚Ä¢ File: generated_evals/${evalName}_eval.py
                   ‚Ä¢ Registered as: '${evalName}'
                </div>
                <div style="color: #3b82f6; margin-top: 10px;">
                üöÄ Usage:
                   python simple_evals.py --evals ${evalName}
                </div>
                <div style="color: #ec4899; margin-top: 10px;">
                üí° Features:
                   ‚Ä¢ Batch processing with checkpointing
                   ‚Ä¢ Configurable prompt templates
                   ‚Ä¢ Automatic error handling
                   ‚Ä¢ Progress tracking
                </div>
                <div style="color: #22c55e; margin-top: 20px;">
                ‚úÖ Ready to evaluate your models!
                </div>
            `;
            output.scrollTop = output.scrollHeight;
        }

        function resetDemo() {
            document.getElementById('progressSection').style.display = 'none';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('statusText').textContent = 'Ready to start...';
            document.getElementById('demoOutput').innerHTML = `
                <span style="color: #4ade80;">‚ûú</span> <span style="color: #38bdf8;">agentic-simple-evals</span> <span style="color: #f59e0b;">$</span> Ready to generate evaluation...
                <br><br>
                <span style="color: #9ca3af;">Configure your dataset above and click "Generate Evaluation" to see the magic! ‚ú®</span>
            `;
            
            // Reset form
            document.getElementById('datasetSelect').value = 'rag-datasets/rag-mini-wikipedia';
            document.getElementById('subsetInput').value = 'question-answer';
            document.getElementById('splitSelect').value = 'test';
            document.getElementById('taskType').value = 'auto';
            document.getElementById('scoringMethod').value = 'auto';
            document.getElementById('promptTemplate').value = '';
            document.getElementById('interactiveMode').checked = false;
            document.getElementById('customDataset').style.display = 'none';
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        updateSuggestedConfig();
    </script>
</body>
</html> 